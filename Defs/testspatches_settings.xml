<?xml version="1.0" encoding="utf-8"?>

<Defs>


    <XmlExtensions.SettingsMenuDef>
        <defName>testspatches_settings</defName> <!--Can be anything unique with no periods-->
        <modId>tests.patches</modId> <!--MUST be the same as the one entered earlier-->
        <label>tests patches</label> <!-- This is what displays as your mod's name-->
        <settings>


            <li Class="XmlExtensions.Setting.Text">
                <text>All XML Extensions settings require a restart to be applied!</text>
            </li>
            <li Class="XmlExtensions.Setting.Text">
                <text>All settings are safe to have enabled even if you don't have the appropriate mods.</text>
            </li>
            <li Class="XmlExtensions.Setting.GapLine" />


            <!--settings -->

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_fantasydeep</key>
                <label>Fantasy Metals Reforged - deep drilling nerf.</label>
                <defaultValue>false</defaultValue>
                <tooltip>Makes Fantasy Metals appear less when using ground-penetrating scanner, which makes vanilla materials more common. Makes lumps smaller. Those materials are very expensive, but without this patch too easy to mine and sell.</tooltip>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_solpyrite</key>
                <label>Fantasy Metals Reforged - items made from solpyrite have "solpyrite" adjective instead of "golden?"</label>
                <defaultValue>false</defaultValue>
                <tooltip>Items made from solpyrite will have "solpyrite" adjective instead of "golden?"</tooltip>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_megafauna</key>
                <label>Megafauna - fix tame revenge chances being 0.28% instead of 28%.</label>
                <defaultValue>false</defaultValue>
                <tooltip>looks like a bug</tooltip>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_gacha</key>
                <label>RimGacha - gacha can only be desonstructed for 1 resource</label>
                <defaultValue>false</defaultValue>
                <tooltip>if you have mods that add op resources you could exploit gachas by deconstructing them.</tooltip>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_seedspleasenope</key>
                <label>SeedsPlease: Lite - undo vanilla changes</label>
                <defaultValue>false</defaultValue>
                <tooltip>Undoes the vanilla changes where cotton, devilstrand, healroot, and cocoa yield raw resources that must be refined to be useful. Actually if seeds plus adds any processing chains to modded items, that will be undone too.</tooltip>
            </li>


            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_donteatmyseedspleasethankyou</key>
                <label>SeedsPlease: Lite - seeds aren't eedible</label>
                <defaultValue>false</defaultValue>
                <tooltip>restricting animals from eating valuable seeds requires some annoying (imo) areas micromanagement, not worth it.</tooltip>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_rimsenal</key>
                <label>Rimsenal - defense tech research requires precision rifling</label>
                <defaultValue>false</defaultValue>
                <tooltip>its a bit op to have before other research</tooltip>
            </li>


            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_ssdropdown</key>
                <label>Super Soil - super soils dropdown</label>
                <defaultValue>false</defaultValue>
                <tooltip>because with all ideology floors the menu is getting huge</tooltip>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_ekwhateverphobia</key>
                <label>Traits Excel - some traits are rarer (Ekrixiphobia, demolitions expert, mechanic)</label>
                <defaultValue>false</defaultValue>
                <tooltip>Having the "ekrixiphobia" word show up on every second pawn breaks the immersion a bit, and the other traits are way to specific to be as common as they are.</tooltip>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_bamboo</key>
                <label>VGP Bamboo (Standalone) - bamboo nerf</label>
                <defaultValue>false</defaultValue>
                <tooltip>VGP Bamboo has the same stats as wood, yet it is easier to plant and available before tree sowing research. With this, it will be an early game alternative inferior to wood. Most notable changes: HP 0.65>0.45; beauty offset 1>-1.</tooltip>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_bamboocolor</key>
                <label>VGP Bamboo (Standalone) - make bamboo a bit more green</label>
                <defaultValue>false</defaultValue>
                <tooltip>204,170,128 > 159,161,98</tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_bamboorecipes</key>
                <label>VGP Bamboo (Standalone) - remove "convert bamboo into wood" and "smelt bamboo into chemfuel" recipes</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_wddropdown</key>
                <label>[WD] Expanded Floors - jade floors dropdown</label>
                <defaultValue>false</defaultValue>
                <tooltip>because with all ideology floors the menu is getting huge</tooltip>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_shard</key>
                <label>Weapons From The Vault - shards are 10 times more expensive</label>
                <defaultValue>false</defaultValue>
                <tooltip>I think they were too easy to buy and craft some good weapory.</tooltip>
            </li>


            <!--
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_affair</key>
                <label>NoAffair - affair has no opinion offset (to fix NoAffair mod)</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>
        -->
            <li Class="XmlExtensions.Setting.GapLine" />
            <li Class="XmlExtensions.Setting.Text">
                <text>Humanoid Alien Races - those settings affect ALL HAR races:</text>
            </li>
            <li Class="XmlExtensions.Setting.Gap">
                <spacing>18</spacing>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_rcustomstats</key>
                <label>remove custom work stats (e.g. research speed, mining yield, etc)</label>
                <defaultValue>false</defaultValue>
                <tooltip>Defs/AlienRace.ThingDef_AlienRace/statBases/ResearchSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/MiningSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/GeneralLaborSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/ConstructSuccessChance |
Defs/AlienRace.ThingDef_AlienRace/statBases/DeepDrillingSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/MiningYield |
Defs/AlienRace.ThingDef_AlienRace/statBases/SmoothingSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/AnimalGatherSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/AnimalGatherYield |
Defs/AlienRace.ThingDef_AlienRace/statBases/PlantWorkSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/PlantHarvestYield |
Defs/AlienRace.ThingDef_AlienRace/statBases/DrugHarvestYield |
Defs/AlienRace.ThingDef_AlienRace/statBases/ConstructionSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/ConstructSuccessChance |
Defs/AlienRace.ThingDef_AlienRace/statBases/FixBrokenDownBuildingSuccessChance |
Defs/AlienRace.ThingDef_AlienRace/statBases/MedicalTendSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/MedicalTendQuality |
Defs/AlienRace.ThingDef_AlienRace/statBases/MedicalOperationSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/MedicalSurgerySuccessChance |
Defs/AlienRace.ThingDef_AlienRace/statBases/SmeltingSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/DrugSynthesisSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/CookSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/FoodPoisonChance |
Defs/AlienRace.ThingDef_AlienRace/statBases/DrugCookingSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/ButcheryFleshSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/ButcheryMechanoidSpeed |
Defs/AlienRace.ThingDef_AlienRace/statBases/ButcheryFleshEfficiency |
Defs/AlienRace.ThingDef_AlienRace/statBases/ButcheryMechanoidEfficiency |
Defs/AlienRace.ThingDef_AlienRace/statBases/ButcheryFleshEfficiency |
Defs/AlienRace.ThingDef_AlienRace/statBases/NegotiationAbility |
Defs/AlienRace.ThingDef_AlienRace/statBases/TradePriceImprovement |
Defs/AlienRace.ThingDef_AlienRace/statBases/DrugSellPriceImprovement |
Defs/AlienRace.ThingDef_AlienRace/statBases/TameAnimalChance |
Defs/AlienRace.ThingDef_AlienRace/statBases/TrainAnimalChance</tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_HungerRate</key>
                <label>remove custom hunger rates</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_ImmunityGainSpeed</key>
                <label>remove custom immunity gain speeds</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_MentalBreakThreshold</key>
                <label>remove custom mental break thresholds</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_Temperature</key>
                <label>replace custom min/max comfy temperatures</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_PsychicSensitivity</key>
                <label>remove custom psychic sensitivity</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_RestRate</key>
                <label>remove custom rest rate</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_ShootingAccuracyPawn</key>
                <label>remove custom shooting accuracy and aiming time</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_GlobalLearningFactor</key>
                <label>remove custom skill learning rates</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_ToxicSensitivity</key>
                <label>remove custom toxic sensitivity</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>

            <li Class="XmlExtensions.Setting.Gap">
                <spacing>18</spacing>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_HumongousMoveSpeeds</key>
                <label>replace move speeds above 4.6 with 4.6</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_lifeExpectancy</key>
                <label>replace life expectancies above 100 with 100</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_PainShockThreshold</key>
                <label>replace pain shock thresholds above 1 with 1</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>

            <li Class="XmlExtensions.Setting.Gap">
                <spacing>18</spacing>
            </li>


            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_humanRecipeImport</key>
                <label>all races import human surgery recipes</label>
                <defaultValue>false</defaultValue>
                <tooltip>adds humanRecipeImport tag to all races, which does a basic check if there are any valid bodyparts in the body of your race before it imports.</tooltip>
            </li>


            <li Class="XmlExtensions.Setting.Gap">
                <spacing>18</spacing>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_thoughtSettings</key>
                <label>remove all custom thoughts (thoughtSettings)</label>
                <defaultValue>false</defaultValue>
                <tooltip>every second race doesn't mind sleeping in barracks because modders are very fond of removing that particular thought from their races.</tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_forcedRaceTraitEntries</key>
                <label>remove forced traits</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_disallowedTraits</key>
                <label>remove disallowed traits</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_traitCount</key>
                <label>remove custom trait counts</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_chemicalSettings</key>
                <label>remove chemical settings (custom reactions to drugs)</label>
                <defaultValue>false</defaultValue>
                <tooltip></tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_FoodType</key>
                <label>give all races OmnivoreHuman diet</label>
                <defaultValue>false</defaultValue>
                <tooltip>useful when custom thoughts are disabled as some races can only eat raw food and corpses and it would be very unfortunate if they didn't like said raw food and corpses...</tooltip>
            </li>
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_raceRestriction</key>
                <label>remove ALL race restrictions</label>
                <defaultValue>false</defaultValue>
                <tooltip>this means all races will be able to wear all apparel, use all weapons, research all researches, build all buildings, plant all plants, etc. This also means all apparel and weapons that could only be used by specific races will now be available to everyone. This also means some races that aren't meant to wear clothes will still wear them, looking weird.</tooltip>
            </li>


            <li Class="XmlExtensions.Setting.Gap">
                <spacing>12</spacing>
            </li>

            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_hediffGraphics</key>
                <label>remove hediff- and backstory-based graphics</label>
                <defaultValue>false</defaultValue>
                <tooltip>This doesn't fix the TryResolveGraphics patch, doesn't seem to make it any better at all.</tooltip>
            </li>


            <li Class="XmlExtensions.Setting.Gap">
                <spacing>200</spacing>
            </li>
            <li Class="XmlExtensions.Setting.GapLine" />
            <li Class="XmlExtensions.Setting.Checkbox">
                <key>testspatches_iamtest</key>
                <label>
                    <![CDATA[tests personal settings (<b>please ignore and don't enable</b>)]]>
                </label>
                <defaultValue>false</defaultValue>
                <highlight>false</highlight>
            </li>
            <li Class="XmlExtensions.Setting.GapLine" />
            <li Class="XmlExtensions.Setting.ToggleableSettings">
                <key>testspatches_iamtest</key>
                <caseTrue>
                    <li Class="XmlExtensions.Setting.TabView">
                        <tabs>
                            <li>
                                <label>Tab label here</label>
                                <settings>
                                    <li Class="XmlExtensions.Setting.Checkbox">
                                        <key>testspatches_xmlfixes</key>
                                        <label>xml fixes</label>
                                        <defaultValue>false</defaultValue>
                                        <tooltip>a bunch of operations to clean up my log so that I can see my own errors (lack thereof) easier. please don't publish mods with this enabled.</tooltip>
                                    </li>

                                    <li Class="XmlExtensions.Setting.Gap">
                                        <spacing>12</spacing>
                                    </li>

                                    <li Class="XmlExtensions.Setting.Checkbox">
                                        <key>testspatches_neronix19</key>
                                        <label>neronix13</label>
                                        <defaultValue>false</defaultValue>
                                        <tooltip>read title</tooltip>
                                    </li>
                                    <li Class="XmlExtensions.Setting.Checkbox">
                                        <key>testspatches_SLIMES</key>
                                        <label>slimes</label>
                                        <defaultValue>false</defaultValue>
                                        <tooltip>Slime mold or slime mould is an informal name given to several kinds of unrelated eukaryotic organisms that can live freely as single cells, but can also aggregate together to form multicellular reproductive structures. Slime molds were formerly classified as fungi but are no longer considered part of that kingdom. Although not forming a single monophyletic clade, they are grouped within the paraphyletic group, kingdom Protista.
More than 900 species of slime mold occur globally. Their common name refers to part of some of these organisms' life cycles where they can appear as gelatinous "slime". This is mostly seen with the Myxogastria, which are the only macroscopic slime molds. Most slime molds are smaller than a few centimetres, but some species may reach sizes up to several square metres and masses up to 20 kilograms.
They feed on microorganisms that live in any type of dead plant material. They contribute to the decomposition of dead vegetation, and feed on bacteria, yeasts, and fungi. For this reason, slime molds are usually found in soil, lawns, and on the forest floor, commonly on deciduous logs. In tropical areas they are also common on inflorescences and fruits, and in aerial situations (e.g., in the canopy of trees). In urban areas, they are found on mulch or in the leaf mold in rain gutters, and also grow in air conditioners, especially when the drain is blocked.
                                        </tooltip>

                                    </li>
                                    <li Class="XmlExtensions.Setting.Checkbox">
                                        <key>testspatches_hanarfat</key>
                                        <label>fat hanar</label>
                                        <defaultValue>false</defaultValue>
                                        <tooltip>a pawn should want to become fat because that way there will be more of it in the world</tooltip>
                                    </li>
                                    <li Class="XmlExtensions.Setting.Checkbox">
                                        <key>testspatches_skeletons</key>
                                        <label>skeletons</label>
                                        <defaultValue>false</defaultValue>
                                        <tooltip>i already forgot what this one does</tooltip>
                                    </li>
                                    <li Class="XmlExtensions.Setting.Checkbox">
                                        <key>testspatches_voe</key>
                                        <label>voe</label>
                                        <defaultValue>false</defaultValue>
                                        <tooltip>
                                            <![CDATA[<b>hi</b>]]>
                                        </tooltip>
                                    </li>

                                    <li Class="XmlExtensions.Setting.Gap"></li>
                                    <li Class="XmlExtensions.Setting.Checkbox">
                                        <key>testspatches_opquest</key>
                                        <label>op</label>
                                        <defaultValue>false</defaultValue>
                                        <tooltip>reminder: cherry picker;
oddities;
exotics fine weaponry FROM MERGE
                
- Vali's Charged Arsenal: everything
- Vali's Charged Arsenal - Eltex Series: everything
- Rimsenal - Augmented Vanilla Pack: all smart weapons
- Exotic's Fine Weaponry: some weapons (from merge)
- Destiny 2 Exotic Weapons: everything
- Weapons from the Vault: everything
- Kit's VFE Weapons: everything
- Too Many Weapons: everything craftable
- Specialist Weapons (Continued): everything
- No Man Sky Weapon Pack: everything
- No Man Sky Heavy Weapon Pack: everything
- FCP Children of Atom Equipment Teaser: everything
- FCP FNV Heavy Weapons Pack!: everything craftable
- FCP Classic Plasma Weapons Pack!: everything
- FCP FNV Laser Weapons: everything
- Altherian Export - Elemental Weaponry: everything
- [M.W]Resonant Munitions: everything
- Grandyy's Fancy Armory: all weapons
- HALO: Rimworld Psychic Pulse Armory (Continued): everything
- Industrial Armory: everything
- Cursed Guns: all guns
</tooltip>
                                    </li>
                                </settings>
                            </li>
                            <li>
                                <label>op</label>
                                <settings>
                                    <li Class="XmlExtensions.Setting.ToggleableSettings">
                                        <key>testspatches_opquest</key>
                                        <caseTrue>

                                            <li Class="XmlExtensions.Setting.Text">
                                                <text>please disable</text>
                                            </li>
                                            <li Class="XmlExtensions.Setting.Checkbox">
                                                <key>testspatches_opquest</key>
                                                <label>please disable...</label>
                                                <defaultValue>false</defaultValue>
                                            </li>
                                            <li Class="XmlExtensions.Setting.GapLine" />
                                            <li Class="XmlExtensions.Setting.Group">
                                                <settings></settings>
                                            </li>
                                        </caseTrue>
                                    </li>
                                </settings>
                            </li>
                            <li>
                                <label>hi</label>
                                <settings>
                                    <li Class="XmlExtensions.Setting.Text">
                                        <text>hi</text>
                                    </li>
                                </settings>
                            </li>
                            <!--As many tabs as you want-->
                        </tabs>
                    </li>

                </caseTrue>
            </li>


        </settings>


    </XmlExtensions.SettingsMenuDef>

    <XmlExtensions.PatchDef Name="testspatches_opn" Abstract="True">
        <parameters>
            <li>defName</li>
        </parameters>
        <apply>

            <Operation Class="PatchOperationConditional">
                <xpath>Defs/ThingDef[defName="{defName}"]</xpath>
                <match Class="PatchOperationSequence">
                    <operations>
                        <li Class="XmlExtensions.OptionalPatch">
                            <modId>tests.patches</modId>
                            <key>opquest_{defName}</key>
                            <defaultValue>true</defaultValue>
                            <caseTrue>
                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <xpath>Defs/ThingDef[defName="{defName}"]</xpath>
                                    <compare>Name</compare>
                                    <checkAttributes>false</checkAttributes>
                                    <value>
                                        <thingSetMakerTags Inherit="False" />
                                    </value>
                                </Operation>
                                <!--
                                <Operation Class="PatchOperationRemove">
                                    <success>Always</success>
                                    <xpath>/Defs/ThingDef[defName="{defName}"]/recipeMaker</xpath>
                                </Operation>
                            -->
                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <success>Always</success>
                                    <xpath>/Defs/ThingDef[defName="{defName}"]</xpath>
                                    <value>
                                        <recipeMaker Inherit="False" />
                                    </value>
                                </Operation>
                                <Operation Class="PatchOperationAdd">
                                    <success>Always</success>
                                    <xpath>/Defs/ThingDef[defName="{defName}" and (not(costList))]</xpath>
                                    <value>
                                        <costList Inherit="False">
                                            <Steel>100</Steel>
                                            <ComponentIndustrial>2</ComponentIndustrial>
                                        </costList>
                                    </value>
                                </Operation>
                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <success>Always</success>
                                    <xpath>/Defs/ThingDef[defName="{defName}"]</xpath>
                                    <value>
                                        <costStuffCount Inherit="False" />
                                    </value>
                                </Operation>
                                <Operation Class="PatchOperationRemove">
                                    <success>Always</success>
                                    <xpath>/Defs/RecipeDef[products/{defName}]</xpath>
                                </Operation>
                            </caseTrue>
                            <caseFalse></caseFalse>
                        </li>


                        <li Class="XmlExtensions.CreateVariable">
                            <storeIn>texture</storeIn>
                            <value>Defs/ThingDef[defName="{defName}"]/graphicData/texPath</value>
                            <fromXml>true</fromXml>
                            <defaultValue>World/WorldObjects/Expanding/PeaceTalks</defaultValue>
                            <apply>
                                <Operation Class="XmlExtensions.PatchOperationAdd">
                                    <xmlDoc>testsopquests</xmlDoc>
                                    <xpath>testsopquests/settings</xpath>
                                    <value>
                                        <li Class="XmlExtensions.Setting.SplitColumns">
                                            <gapSize>6</gapSize>
                                            <drawLine>false</drawLine>
                                            <splits>
                                                <li>0.1</li>
                                                <li>0.3</li>
                                            </splits>
                                            <settings>
                                                <li>
                                                    <li Class="XmlExtensions.Setting.DrawImage">
                                                        <texPath>{texture}</texPath>
                                                        <!--<dimensions>(32,32)</dimensions>-->
                                                        <anchor>Left</anchor>
                                                    </li>

                                                </li>
                                                <li>
                                                    <li Class="XmlExtensions.Setting.Text">
                                                        <text>none</text>
                                                    </li>

                                                </li>
                                                <li>
                                                    <li Class="XmlExtensions.Setting.Checkbox">
                                                        <key>opquest_{defName}</key>
                                                        <label>{defName}</label>
                                                        <defaultValue>false</defaultValue>
                                                    </li>

                                                </li>

                                            </settings>
                                        </li>
                                    </value>
                                </Operation>

                            </apply>
                        </li>

                    </operations>
                </match>
            </Operation>

        </apply>
    </XmlExtensions.PatchDef>

    <XmlExtensions.PatchDef Name="testspatches_op" Abstract="True">
        <parameters>
            <li>defName</li>
        </parameters>
        <apply>
            <Operation Class="PatchOperationConditional">
                <xpath>Defs/ThingDef[defName="{defName}"]</xpath>
                <match Class="PatchOperationSequence">
                    <operations>
                        <li Class="XmlExtensions.OptionalPatch">
                            <modId>tests.patches</modId>
                            <key>opquest_{defName}</key>
                            <defaultValue>true</defaultValue>
                            <caseTrue>
                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <xpath>Defs/ThingDef[defName="{defName}"]</xpath>
                                    <compare>Name</compare>
                                    <checkAttributes>false</checkAttributes>
                                    <value>
                                        <thingSetMakerTags Inherit="False">
                                            <li>RewardStandardHighFreq</li>
                                            <li>RewardStandardQualitySuper</li>
                                            <li>RewardSpecial</li>
                                        </thingSetMakerTags>
                                    </value>
                                </Operation>
                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <success>Always</success>
                                    <xpath>/Defs/ThingDef[defName="{defName}"]</xpath>
                                    <value>
                                        <recipeMaker Inherit="False" />
                                    </value>
                                </Operation>
                                <Operation Class="PatchOperationAdd">
                                    <success>Always</success>
                                    <xpath>/Defs/ThingDef[defName="{defName}" and (not(costList))]</xpath>
                                    <value>
                                        <costList Inherit="False">
                                            <Steel>100</Steel>
                                            <ComponentSpacer>5</ComponentSpacer>
                                        </costList>
                                    </value>
                                </Operation>
                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <success>Always</success>
                                    <xpath>/Defs/ThingDef[defName="{defName}"]</xpath>
                                    <value>
                                        <costStuffCount Inherit="False" />
                                    </value>
                                </Operation>
                                <Operation Class="PatchOperationRemove">
                                    <success>Always</success>
                                    <xpath>/Defs/RecipeDef[products/{defName}]</xpath>
                                </Operation>
                            </caseTrue>
                            <caseFalse></caseFalse>
                        </li>

                        <li Class="XmlExtensions.CreateVariable">
                            <storeIn>texture</storeIn>
                            <value>Defs/ThingDef[defName="{defName}"]/graphicData/texPath</value>
                            <fromXml>true</fromXml>
                            <defaultValue>World/WorldObjects/Expanding/PeaceTalks</defaultValue>
                            <apply>
                                <Operation Class="XmlExtensions.PatchOperationAdd">
                                    <xmlDoc>testsopquests</xmlDoc>
                                    <xpath>testsopquests/settings</xpath>
                                    <value>
                                        <li Class="XmlExtensions.Setting.SplitColumns">
                                            <gapSize>6</gapSize>
                                            <drawLine>false</drawLine>
                                            <splits>
                                                <li>0.1</li>
                                                <li>0.3</li>
                                            </splits>
                                            <settings>
                                                <li>
                                                    <li Class="XmlExtensions.Setting.DrawImage">
                                                        <texPath>{texture}</texPath>
                                                        <!--<dimensions>(32,32)</dimensions>-->
                                                        <anchor>Left</anchor>
                                                    </li>

                                                </li>
                                                <li>
                                                    <li Class="XmlExtensions.Setting.Text">
                                                        <font>Tiny</font>
                                                        <text>RewardStandardMidFreq;
RewardStandardQualitySuper;
RewardSpecial</text>
                                                    </li>
                                                </li>
                                                <li>
                                                    <li Class="XmlExtensions.Setting.Checkbox">
                                                        <key>opquest_{defName}</key>
                                                        <label>{defName}</label>
                                                        <defaultValue>false</defaultValue>
                                                    </li>

                                                </li>

                                            </settings>
                                        </li>
                                    </value>
                                </Operation>

                            </apply>
                        </li>
                    </operations>
                </match>
            </Operation>


        </apply>
    </XmlExtensions.PatchDef>


    <XmlExtensions.PatchDef Name="testspatches_op0" Abstract="True">
        <parameters>
            <li>defName</li>
            <li>tier</li>
        </parameters>
        <apply>
            <Operation Class="PatchOperationConditional">
                <xpath>Defs/ThingDef[defName="{defName}"]</xpath>
                <match Class="PatchOperationSequence">
                    <operations>
                        <li Class="XmlExtensions.OptionalPatch">
                            <modId>tests.patches</modId>
                            <key>opquest_{defName}</key>
                            <defaultValue>true</defaultValue>
                            <caseTrue>
                                <!--
                    <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                        <xpath>Defs/ThingDef[defName="{defName}"]</xpath>
                        <compare>Name</compare>
                        <checkAttributes>false</checkAttributes>
                        <value>
                            <thingSetMakerTags>
                                <li>{tier}</li>
                                <li>{tier2}</li>
                            </thingSetMakerTags>
                        </value>
                    </Operation>
                -->
                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <success>Always</success>
                                    <xpath>/Defs/ThingDef[defName="{defName}"]</xpath>
                                    <value>
                                        <recipeMaker Inherit="False" />
                                    </value>
                                </Operation>
                                <Operation Class="PatchOperationAdd">
                                    <success>Always</success>
                                    <xpath>/Defs/ThingDef[defName="{defName}" and (not(costList))]</xpath>
                                    <value>
                                        <costList Inherit="False">
                                            <Steel>100</Steel>
                                            <ComponentSpacer>3</ComponentSpacer>
                                        </costList>
                                    </value>
                                </Operation>
                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <success>Always</success>
                                    <xpath>/Defs/ThingDef[defName="{defName}"]</xpath>
                                    <value>
                                        <costStuffCount Inherit="False" />
                                    </value>
                                </Operation>
                                <Operation Class="PatchOperationRemove">
                                    <success>Always</success>
                                    <xpath>/Defs/RecipeDef[products/{defName}]</xpath>
                                </Operation>
                            </caseTrue>
                            <caseFalse></caseFalse>
                        </li>

                        <li Class="XmlExtensions.CreateVariable">
                            <storeIn>texture</storeIn>
                            <value>Defs/ThingDef[defName="{defName}"]/graphicData/texPath</value>
                            <fromXml>true</fromXml>
                            <defaultValue>World/WorldObjects/Expanding/PeaceTalks</defaultValue>
                            <apply>
                                <Operation Class="XmlExtensions.PatchOperationAdd">
                                    <xmlDoc>testsopquests</xmlDoc>
                                    <xpath>testsopquests/settings</xpath>
                                    <value>
                                        <li Class="XmlExtensions.Setting.SplitColumns">
                                            <gapSize>6</gapSize>
                                            <drawLine>false</drawLine>
                                            <splits>
                                                <li>0.1</li>
                                                <li>0.3</li>
                                            </splits>
                                            <settings>
                                                <li>
                                                    <li Class="XmlExtensions.Setting.DrawImage">
                                                        <texPath>{texture}</texPath>
                                                        <!--<dimensions>(32,32)</dimensions>-->
                                                        <anchor>Left</anchor>
                                                    </li>

                                                </li>
                                                <li>
                                                    <li Class="XmlExtensions.Setting.Text">
                                                        <text>{tier} (unchanged)</text>
                                                    </li>
                                                </li>
                                                <li>
                                                    <li Class="XmlExtensions.Setting.Checkbox">
                                                        <key>opquest_{defName}</key>
                                                        <label>{defName}</label>
                                                        <defaultValue>false</defaultValue>
                                                    </li>
                                                </li>

                                            </settings>
                                        </li>
                                    </value>
                                </Operation>

                            </apply>
                        </li>
                    </operations>
                </match>
            </Operation>


        </apply>
    </XmlExtensions.PatchDef>


    <XmlExtensions.PatchDef Name="testspatches_opow" Abstract="True">
        <parameters>
            <li>defName</li>
            <li>tag</li> <!-- OddityMelee OddityRanged -->
            <li>cost</li> <!-- 8 -->
        </parameters>
        <apply>
            <Operation Class="PatchOperationConditional">
                <xpath>Defs/ThingDef[defName="{defName}"]</xpath>
                <match Class="XmlExtensions.FindMod">
                    <mods>
                        <li>Oddities: Weapons Module</li>
                    </mods>
                    <caseTrue>

                        <Operation Class="XmlExtensions.OptionalPatch">
                            <modId>tests.patches</modId>
                            <key>opquest_{defName}</key>
                            <defaultValue>true</defaultValue>
                            <caseTrue>

                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <xpath>Defs/ThingDef[defName="{defName}"]</xpath>
                                    <compare>Name</compare>
                                    <checkAttributes>false</checkAttributes>
                                    <value>
                                        <thingSetMakerTags Inherit="False">
                                            <li>RewardOddity</li>
                                        </thingSetMakerTags>
                                    </value>
                                </Operation>

                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <xpath>Defs/ThingDef[defName="{defName}"]</xpath>
                                    <compare>Name</compare>
                                    <checkAttributes>false</checkAttributes>
                                    <value>
                                        <weaponTags>
                                            <li>{tag}</li>
                                        </weaponTags>
                                    </value>
                                </Operation>

                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <xpath>Defs/ThingDef[defName="{defName}"]</xpath>
                                    <compare>Name</compare>
                                    <checkAttributes>false</checkAttributes>
                                    <value>
                                        <tradeability>Sellable</tradeability>
                                    </value>
                                </Operation>

                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <success>Always</success>
                                    <xpath>/Defs/ThingDef[defName="{defName}"]</xpath>
                                    <value>
                                        <costList Inherit="False">
                                            <OC_OddityFragment>{cost}</OC_OddityFragment>
                                        </costList>
                                    </value>
                                </Operation>

                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <success>Always</success>
                                    <xpath>/Defs/ThingDef[defName="{defName}"]</xpath>
                                    <value>
                                        <recipeMaker Inherit="False">
                                            <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
                                            <workSkill>Crafting</workSkill>
                                            <effectWorking>Smith</effectWorking>
                                            <soundWorking>Recipe_Smith</soundWorking>
                                            <unfinishedThingDef>UnfinishedGun</unfinishedThingDef>
                                            <skillRequirements>
                                                <Crafting>12</Crafting>
                                            </skillRequirements>
                                            <recipeUsers Inherit="False">
                                                <li>FabricationBench</li>
                                            </recipeUsers>
                                            <researchPrerequisite>OW_OddityRecombinationWeapon</researchPrerequisite>
                                        </recipeMaker>
                                    </value>
                                </Operation>

                                <Operation Class="PatchOperationRemove">
                                    <success>Always</success>
                                    <xpath>/Defs/RecipeDef[products/{defName}]</xpath>
                                </Operation>

                            </caseTrue>
                            <caseFalse></caseFalse>
                        </Operation>

                        <Operation Class="XmlExtensions.CreateVariable">
                            <storeIn>texture</storeIn>
                            <value>Defs/ThingDef[defName="{defName}"]/graphicData/texPath</value>
                            <fromXml>true</fromXml>
                            <defaultValue>World/WorldObjects/Expanding/PeaceTalks</defaultValue>
                            <apply>
                                <Operation Class="XmlExtensions.PatchOperationAdd">
                                    <xmlDoc>testsopquests</xmlDoc>
                                    <xpath>testsopquests/settings</xpath>
                                    <value>
                                        <li Class="XmlExtensions.Setting.SplitColumns">
                                            <gapSize>6</gapSize>
                                            <drawLine>false</drawLine>
                                            <splits>
                                                <li>0.1</li>
                                                <li>0.3</li>
                                            </splits>
                                            <settings>
                                                <li>
                                                    <li Class="XmlExtensions.Setting.DrawImage">
                                                        <texPath>{texture}</texPath>
                                                        <!--<dimensions>(32,32)</dimensions>-->
                                                        <anchor>Left</anchor>
                                                    </li>

                                                </li>
                                                <li>
                                                    <li Class="XmlExtensions.Setting.Text">
                                                        <text>oddity, {cost} fragments</text>
                                                    </li>
                                                </li>
                                                <li>
                                                    <li Class="XmlExtensions.Setting.Checkbox">
                                                        <key>opquest_{defName}</key>
                                                        <label>{defName}</label>
                                                        <defaultValue>false</defaultValue>
                                                    </li>
                                                </li>

                                            </settings>
                                        </li>
                                    </value>
                                </Operation>

                            </apply>
                        </Operation>
                    </caseTrue>
                </match>
            </Operation>


        </apply>
    </XmlExtensions.PatchDef>

    <XmlExtensions.PatchDef Name="testspatches_opod" Abstract="True">
        <parameters>
            <li>defName</li>
            <li>cost</li>
        </parameters>
        <apply>
            <Operation Class="PatchOperationConditional">
                <xpath>Defs/ThingDef[defName="{defName}"]</xpath>
                <match Class="XmlExtensions.FindMod">
                    <mods>
                        <li>Oddities: Deployables Module</li>
                    </mods>
                    <caseTrue>

                        <Operation Class="XmlExtensions.OptionalPatch">
                            <modId>tests.patches</modId>
                            <key>opquest_{defName}</key>
                            <defaultValue>true</defaultValue>
                            <caseTrue>

                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <xpath>Defs/ThingDef[defName="{defName}"]</xpath>
                                    <compare>Name</compare>
                                    <checkAttributes>false</checkAttributes>
                                    <value>
                                        <thingSetMakerTags Inherit="False">
                                            <li>RewardOddity</li>
                                        </thingSetMakerTags>
                                    </value>
                                </Operation>

                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <xpath>Defs/ThingDef[defName="{defName}"]</xpath>
                                    <compare>Name</compare>
                                    <checkAttributes>false</checkAttributes>
                                    <value>
                                        <tradeability>Sellable</tradeability>
                                    </value>
                                </Operation>

                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <success>Always</success>
                                    <xpath>/Defs/ThingDef[defName="{defName}"]</xpath>
                                    <value>
                                        <costList Inherit="False">
                                            <OC_OddityFragment>{cost}</OC_OddityFragment>
                                        </costList>
                                    </value>
                                </Operation>

                                <Operation Class="XmlExtensions.PatchOperationAddOrReplace">
                                    <success>Always</success>
                                    <xpath>/Defs/ThingDef[defName="{defName}"]</xpath>
                                    <value>
                                        <recipeMaker>
                                            <unfinishedThingDef>UnfinishedPack</unfinishedThingDef>
                                            <researchPrerequisite>OD_OddityRecombinationDeployable</researchPrerequisite>
                                            <recipeUsers Inherit="False">
                                                <li>FabricationBench</li>
                                            </recipeUsers>
                                            <useIngredientsForColor>false</useIngredientsForColor>
                                            <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
                                            <workSkill>Crafting</workSkill>
                                            <effectWorking>Smith</effectWorking>
                                            <soundWorking>Recipe_Smith</soundWorking>
                                            <skillRequirements>
                                                <Crafting>12</Crafting>
                                            </skillRequirements>
                                        </recipeMaker>
                                    </value>
                                </Operation>

                                <Operation Class="PatchOperationRemove">
                                    <success>Always</success>
                                    <xpath>/Defs/RecipeDef[products/{defName}]</xpath>
                                </Operation>

                            </caseTrue>
                            <caseFalse></caseFalse>
                        </Operation>

                        <Operation Class="XmlExtensions.CreateVariable">
                            <storeIn>texture</storeIn>
                            <value>Defs/ThingDef[defName="{defName}"]/graphicData/texPath</value>
                            <fromXml>true</fromXml>
                            <defaultValue>World/WorldObjects/Expanding/PeaceTalks</defaultValue>
                            <apply>
                                <Operation Class="XmlExtensions.PatchOperationAdd">
                                    <xmlDoc>testsopquests</xmlDoc>
                                    <xpath>testsopquests/settings</xpath>
                                    <value>
                                        <li Class="XmlExtensions.Setting.SplitColumns">
                                            <gapSize>6</gapSize>
                                            <drawLine>false</drawLine>
                                            <splits>
                                                <li>0.1</li>
                                                <li>0.3</li>
                                            </splits>
                                            <settings>
                                                <li>
                                                    <li Class="XmlExtensions.Setting.DrawImage">
                                                        <texPath>{texture}</texPath>
                                                        <!--<dimensions>(32,32)</dimensions>-->
                                                        <anchor>Left</anchor>
                                                    </li>

                                                </li>
                                                <li>
                                                    <li Class="XmlExtensions.Setting.Text">
                                                        <text>oddity, {cost} fragments</text>
                                                    </li>
                                                </li>
                                                <li>
                                                    <li Class="XmlExtensions.Setting.Checkbox">
                                                        <key>opquest_{defName}</key>
                                                        <label>{defName}</label>
                                                        <defaultValue>false</defaultValue>
                                                    </li>
                                                </li>

                                            </settings>
                                        </li>
                                    </value>
                                </Operation>

                            </apply>
                        </Operation>
                    </caseTrue>
                </match>
            </Operation>


        </apply>
    </XmlExtensions.PatchDef>

</Defs>