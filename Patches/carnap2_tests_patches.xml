<?xml version="1.0" encoding="utf-8"?>
<Patch>
    <!--
    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_123456</key>
        <defaultValue>false</defaultValue>
        <caseTrue>

        </caseTrue>
        <caseFalse>

        </caseFalse>
    </Operation>

    -->
    <!-- I believe this is a patch for "weapons from the vault" mod, making the shards ten times more expensive -->

    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_shard</key>
        <defaultValue>false</defaultValue>
        <caseTrue>

            <Operation Class="PatchOperationReplace">
                <success>Always</success>
                <xpath>/Defs/ThingDef[defName="WFTV_ComponentShar"]/statBases/MarketValue</xpath>
                <value>
                    <MarketValue>5000</MarketValue>
                </value>
            </Operation>

        </caseTrue>
        <caseFalse></caseFalse>
    </Operation>


    <!-- rimsenal research patch -->

    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_rimsenal</key>
        <defaultValue>false</defaultValue>
        <caseTrue>

            <Operation Class="PatchOperationAdd">
                <success>Always</success>
                <xpath>Defs/ResearchProjectDef[defName="DefenceTech"]/prerequisites</xpath>
                <value>
                    <li>PrecisionRifling</li>
                </value>
            </Operation>

        </caseTrue>
        <caseFalse></caseFalse>
    </Operation>


    <!-- ek-whatever-phobia trait and demolition expert traits were too common  -->
    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_ekwhateverphobia</key>
        <defaultValue>false</defaultValue>
        <caseTrue>

            <Operation Class="PatchOperationReplace">
                <success>Always</success>
                <xpath>/Defs/TraitDef[defName="anxietyBomb" or defName="DemoExpert"]/commonality</xpath>
                <value>
                    <commonality>0.1</commonality>
                </value>
            </Operation>

            <!-- mechanic traits are also quite specific to have commonality 1 -->

            <Operation Class="PatchOperationReplace">
                <success>Always</success>
                <xpath>/Defs/TraitDef[defName="Mechanic"]/commonality</xpath>
                <value>
                    <commonality>0.35</commonality>
                </value>
            </Operation>

        </caseTrue>
        <caseFalse></caseFalse>
    </Operation>

    <!-- pretty sure no affair mod breaks affairs -->

    <!--
    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_affair</key>
        <defaultValue>false</defaultValue>
        <caseTrue>


            <Operation Class="PatchOperationReplace">
                <success>Always</success>
                <xpath>/Defs/ThoughtDef[defName="Affair"]/stages/li</xpath>
                <value>
                    <li>
                        <label>affair</label>
                        <baseOpinionOffset>0</baseOpinionOffset>
                    </li>
                </value>
            </Operation>


        </caseTrue>
        <caseFalse></caseFalse>
    </Operation>
-->

    <!-- gacha figurines can't be exploited for deconstruction -->
    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_gacha</key>
        <defaultValue>false</defaultValue>
        <caseTrue>
            <Operation Class="PatchOperationReplace">
                <success>Always</success>
                <xpath>/Defs/ThingDef[defName="Gachapon"]/costStuffCount</xpath>
                <value>
                    <costStuffCount>1</costStuffCount>
                </value>
            </Operation>
        </caseTrue>
        <caseFalse></caseFalse>
    </Operation>


    <!--
    <Operation Class="XmlExtensions.ApplyPatch">
        <patchName>carnap2TPatchesModPatch</patchName>
        <arguments>
            <li>TPatchesFantasyMetalSolpyrite</li>
            <li>Fantasy Metals Reforged</li>
            <li>Tweaks</li>
            <li>Replace "golden?" with solpyrite</li>
            <li>Items made from solpyrite will have "solpyrite" adjective instead of "golden?".</li>
            <li>xpath: removes /Defs/ThingDef[defName="Solorite"]/stuffAdjective</li>
            <li>false</li>
        </arguments>
    </Operation>
-->
    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_solpyrite</key>
        <defaultValue>false</defaultValue>
        <caseTrue>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[defName="Solorite"]/stuffProps/stuffAdjective</xpath>
            </Operation>

        </caseTrue>
        <caseFalse></caseFalse>
    </Operation>


    <!--
    <Operation Class="XmlExtensions.ApplyPatch">
        <patchName>carnap2TPatchesModPatch</patchName>
        <arguments>
            <li>TPatchesMegafauna_manhunterOnTameFailChance</li>
            <li>Megafauna</li>
            <li>Tweaks</li>
            <li>Fix tame revenge chance</li>
            <li>Fixes several megafauna tame revenge chances being 0.28% instead of 28% (which is probably a bug).</li>
            <li>Chalicotherium, Procoptodon, Castoroides, Sivatherium, Macrauchenia, Megaloceros</li>
            <li>false</li>
        </arguments>
    </Operation>
-->

    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_megafauna</key>
        <defaultValue>false</defaultValue>
        <caseTrue>


            <Operation Class="PatchOperationSequence">
                <success>Always</success>
                <operations>
                    <li Class="PatchOperationReplace">
                        <xpath>/Defs/ThingDef[defName="Chalicotherium"]/race/manhunterOnTameFailChance</xpath>
                        <value>
                            <manhunterOnTameFailChance>0.28</manhunterOnTameFailChance>
                        </value>
                    </li>
                    <li Class="PatchOperationReplace">
                        <success>Always</success>
                        <xpath>/Defs/ThingDef[defName="Procoptodon"]/race/manhunterOnTameFailChance</xpath>
                        <value>
                            <manhunterOnTameFailChance>0.28</manhunterOnTameFailChance>
                        </value>
                    </li>
                    <li Class="PatchOperationReplace">
                        <success>Always</success>
                        <xpath>/Defs/ThingDef[defName="Castoroides"]/race/manhunterOnTameFailChance</xpath>
                        <value>
                            <manhunterOnTameFailChance>0.28</manhunterOnTameFailChance>
                        </value>
                    </li>
                    <li Class="PatchOperationReplace">
                        <success>Always</success>
                        <xpath>/Defs/ThingDef[defName="Sivatherium"]/race/manhunterOnTameFailChance</xpath>
                        <value>
                            <manhunterOnTameFailChance>0.28</manhunterOnTameFailChance>
                        </value>
                    </li>
                    <li Class="PatchOperationReplace">
                        <success>Always</success>
                        <xpath>/Defs/ThingDef[defName="Macrauchenia"]/race/manhunterOnTameFailChance</xpath>
                        <value>
                            <manhunterOnTameFailChance>0.28</manhunterOnTameFailChance>
                        </value>
                    </li>
                    <li Class="PatchOperationReplace">
                        <success>Always</success>
                        <xpath>/Defs/ThingDef[defName="Megaloceros"]/race/manhunterOnTameFailChance</xpath>
                        <value>
                            <manhunterOnTameFailChance>0.5</manhunterOnTameFailChance>
                        </value>
                    </li>
                </operations>
            </Operation>

        </caseTrue>
        <caseFalse></caseFalse>
    </Operation>


    <!--
    <Operation Class="XmlExtensions.ApplyPatch">
        <patchName>carnap2TPatchesModPatch</patchName>
        <arguments>
            <li>TPatchesFantasyMetals</li>
            <li>Fantasy Metals Reforged</li>
            <li>Balancing</li>
            <li>Fantasy Metals Reforge deep drilling rebalance</li>
            <li>Makes Fantasy Metals appear less when using ground-penetrating scanner, which makes vanilla materials more common. Makes lumps smaller. Those materials are very expensive, but without this patch too easy to mine and sell.</li>
            <li>commonalities reduced from 0.3 to 0.06, reduced lump sizes and portion sizes.</li>
            <li>false</li>
        </arguments>
    </Operation>
-->


    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_fantasydeep</key>
        <defaultValue>false</defaultValue>
        <caseTrue>


            <Operation Class="PatchOperationSequence">
                <success>Always</success>
                <operations>
                    <!-- because there are no prefixes in defnames it first tests if the mod that is loaded is appropriate -->
                    <li Class="PatchOperationReplace">
                        <success>Normal</success>
                        <xpath>/Defs/ThingDef[defName="Skelsshkrum"]/deepCommonality</xpath>
                        <value>
                            <deepCommonality>0.06</deepCommonality>
                        </value>
                    </li>

                    <li Class="PatchOperationReplace">
                        <success>Normal</success>
                        <xpath>/Defs/ThingDef[defName="Mithril" or
                    defName="Orichalcum" or
                    defName="Adamantite" or
                    defName="Tozra" or
                    defName="Solorite"]/deepCommonality</xpath>
                        <value>
                            <deepCommonality>0.06</deepCommonality>
                        </value>
                    </li>

                    <li Class="PatchOperationReplace">
                        <success>Normal</success>
                        <xpath>/Defs/ThingDef[defName="Mithril" or
                    defName="Orichalcum" or
                    defName="Adamantite" or
                    defName="Tozra" or
                    defName="Solorite"]/deepLumpSizeRange</xpath>
                        <value>
                            <deepLumpSizeRange>
                                <min>1</min>
                                <max>5</max>
                            </deepLumpSizeRange>
                        </value>
                    </li>

                    <li Class="PatchOperationReplace">
                        <success>Normal</success>
                        <xpath>/Defs/ThingDef[defName="Mithril" or
                    defName="Orichalcum" or
                    defName="Adamantite" or
                    defName="Tozra" or
                    defName="Solorite"]/deepCountPerPortion</xpath>
                        <value>
                            <deepCountPerPortion>5</deepCountPerPortion>
                        </value>
                    </li>

                </operations>
            </Operation>


        </caseTrue>
        <caseFalse></caseFalse>
    </Operation>

    <!-- rimfantasy gemstones - replaces gemstones from rimfantasy with tmaterials ones because they had the same stats and description and i didn't like it -->
    <!--
    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_gemstones</key>
        <defaultValue>false</defaultValue>
        <caseTrue>

            <Operation Class="PatchOperationFindMod">
                <mods>
                    <li>TMaterials</li>
                </mods>
                <match Class="PatchOperationSequence">
                    <success>Always</success>
                    <operations>

                        <li Class="PatchOperationRemove">
                            <success>Normal</success>
                            <xpath>/Defs/ThingDef[
                            defName="RF_Diamond" or
                            defName="RF_Ruby" or
                            defName="RF_Carnelian" or
                            defName="RF_Citrine" or
                            defName="RF_Peridot" or
                            defName="RF_Emerald" or
                            defName="RF_Aquamarine" or
                            defName="RF_Sapphire" or
                            defName="RF_Amethyst" or
                            defName="RF_Kunzite" or
                            defName="RF_Onyx"]</xpath>
                        </li>

                        <li Class="PatchOperationReplace">
                            <success>Normal</success>
                            <xpath>/Defs/ThingDef/defName[text()="carnap_diamond"]</xpath>
                            <value>
                                <defName>RF_Diamond</defName>
                            </value>
                        </li>

                        <li Class="PatchOperationReplace">
                            <success>Normal</success>
                            <xpath>/Defs/ThingDef/defName[text()="carnap_ruby"]</xpath>
                            <value>
                                <defName>RF_Ruby</defName>
                            </value>
                        </li>

                        <li Class="PatchOperationReplace">
                            <success>Normal</success>
                            <xpath>/Defs/ThingDef/defName[text()="carnap_carnelian"]</xpath>
                            <value>
                                <defName>RF_Carnelian</defName>
                            </value>
                        </li>

                        <li Class="PatchOperationReplace">
                            <success>Normal</success>
                            <xpath>/Defs/ThingDef/defName[text()="carnap_citrine"]</xpath>
                            <value>
                                <defName>RF_Citrine</defName>
                            </value>
                        </li>

                        <li Class="PatchOperationReplace">
                            <success>Normal</success>
                            <xpath>/Defs/ThingDef/defName[text()="carnap_peridot"]</xpath>
                            <value>
                                <defName>RF_Peridot</defName>
                            </value>
                        </li>

                        <li Class="PatchOperationReplace">
                            <success>Normal</success>
                            <xpath>/Defs/ThingDef/defName[text()="carnap_emerald"]</xpath>
                            <value>
                                <defName>RF_Emerald</defName>
                            </value>
                        </li>

                        <li Class="PatchOperationReplace">
                            <success>Normal</success>
                            <xpath>/Defs/ThingDef/defName[text()="carnap_aquamarine"]</xpath>
                            <value>
                                <defName>RF_Aquamarine</defName>
                            </value>
                        </li>

                        <li Class="PatchOperationReplace">
                            <success>Normal</success>
                            <xpath>/Defs/ThingDef/defName[text()="carnap_sapphire"]</xpath>
                            <value>
                                <defName>RF_Sapphire</defName>
                            </value>
                        </li>

                        <li Class="PatchOperationReplace">
                            <success>Normal</success>
                            <xpath>/Defs/ThingDef/defName[text()="carnap_amethyst"]</xpath>
                            <value>
                                <defName>RF_Amethyst</defName>
                            </value>
                        </li>

                        <li Class="PatchOperationReplace">
                            <success>Normal</success>
                            <xpath>/Defs/ThingDef/defName[text()="carnap_kunzite"]</xpath>
                            <value>
                                <defName>RF_Kunzite</defName>
                            </value>
                        </li>

                        <li Class="PatchOperationReplace">
                            <success>Normal</success>
                            <xpath>/Defs/ThingDef/defName[text()="carnap_onyx"]</xpath>
                            <value>
                                <defName>RF_Onyx</defName>
                            </value>
                        </li>

                    </operations>
                </match>
            </Operation>

        </caseTrue>
        <caseFalse>

            <Operation Class="PatchOperationFindMod">
                <mods>
                    <li>RimFantasy - Gemstones</li>
                </mods>
                <match Class="PatchOperationSequence">
                    <success>Always</success>
                    <operations>

                        <li Class="PatchOperationRemove">
                            <success>Always</success>
                            <xpath>/Defs/ThingDef[
                            defName="carnap_diamond" or
                            defName="carnap_ruby" or
                            defName="carnap_carnelian" or
                            defName="carnap_citrine" or
                            defName="carnap_peridot" or
                            defName="carnap_emerald" or
                            defName="carnap_aquamarine" or
                            defName="carnap_sapphire" or
                            defName="carnap_amethyst" or
                            defName="carnap_kunzite" or
                            defName="carnap_onyx"]</xpath>
                        </li>

                    </operations>
                </match>
            </Operation>


        </caseFalse>
    </Operation>
-->

    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_rcustomstats</key>
        <defaultValue>false</defaultValue>
        <caseTrue>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/ResearchSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/MiningSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/GeneralLaborSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/ConstructSuccessChance |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/DeepDrillingSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/MiningYield |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/SmoothingSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/AnimalGatherSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/AnimalGatherYield |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/PlantWorkSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/PlantHarvestYield |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/DrugHarvestYield |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/ConstructionSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/ConstructSuccessChance |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/FixBrokenDownBuildingSuccessChance |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/MedicalTendSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/MedicalTendQuality |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/MedicalOperationSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/MedicalSurgerySuccessChance |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/SmeltingSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/DrugSynthesisSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/CookSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/FoodPoisonChance |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/DrugCookingSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/ButcheryFleshSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/ButcheryMechanoidSpeed |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/ButcheryFleshEfficiency |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/ButcheryMechanoidEfficiency |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/ButcheryFleshEfficiency |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/NegotiationAbility |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/TradePriceImprovement |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/DrugSellPriceImprovement |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/TameAnimalChance |
                    /Defs/AlienRace.ThingDef_AlienRace/statBases/TrainAnimalChance

                </xpath>
            </Operation>

        </caseTrue>
        <caseFalse></caseFalse>
    </Operation>

    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_MentalBreakThreshold</key>
        <defaultValue>false</defaultValue>
        <caseTrue>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/AlienRace.ThingDef_AlienRace/statBases/MentalBreakThreshold</xpath>
            </Operation>
        </caseTrue>
        <caseFalse></caseFalse>
    </Operation>

    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_GlobalLearningFactor</key>
        <defaultValue>false</defaultValue>
        <caseTrue>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/AlienRace.ThingDef_AlienRace/statBases/GlobalLearningFactor</xpath>
            </Operation>
        </caseTrue>
        <caseFalse></caseFalse>
    </Operation>

    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_ShootingAccuracyPawn</key>
        <defaultValue>false</defaultValue>
        <caseTrue>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/AlienRace.ThingDef_AlienRace/statBases/ShootingAccuracyPawn</xpath>
            </Operation>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/AlienRace.ThingDef_AlienRace/statBases/AimingDelayFactor</xpath>
            </Operation>
        </caseTrue>
        <caseFalse></caseFalse>
    </Operation>

    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_neronix17removelaserguns</key>
        <defaultValue>false</defaultValue>
        <caseTrue>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[@Class="O21Toolbox.Laser.LaserGunDef"]</xpath>
            </Operation>

        </caseTrue>
        <caseFalse></caseFalse>
    </Operation>

    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_neronix17</key>
        <defaultValue>false</defaultValue>
        <caseTrue>


            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef/comps/li[contains(@Class,"O21Toolbox") or contains(compClass,"O21Toolbox")]</xpath>
            </Operation>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef/modExtensions/li[contains(@Class,"O21Toolbox")]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/AlienRace.ThingDef_AlienRace/comps/li[contains(@Class,"O21Toolbox") or contains(compClass,"O21Toolbox")]</xpath>
            </Operation>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/AlienRace.ThingDef_AlienRace/modExtensions/li[contains(@Class,"O21Toolbox")]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/PawnKindDef/comps/li[contains(@Class,"O21Toolbox") or contains(compClass,"O21Toolbox")]</xpath>
            </Operation>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/PawnKindDef/modExtensions/li[contains(@Class,"O21Toolbox")]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/HediffDef/comps/li[contains(@Class,"O21Toolbox") or contains(compClass,"O21Toolbox")]</xpath>
            </Operation>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/HediffDef/modExtensions/li[contains(@Class,"O21Toolbox")]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef/thingClass[contains(text(),"O21Toolbox")]</xpath>
            </Operation>


            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/JobDef[contains(driverClass,"O21Toolbox")]</xpath>
            </Operation>


            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ScenPartDef[contains(scenPartClass,"O21Toolbox")]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/StatDef[contains(workerClass,"O21Toolbox")]</xpath>
            </Operation>


            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/WorkGiverDef[contains(giverClass,"O21Toolbox")]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/RecipeDef[contains(workerClass,"O21Toolbox")]</xpath>
            </Operation>


            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/GenStepDef[defName="O21_GenStep_BiomeOverrides"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <xpath>/Defs/MapGeneratorDef/genSteps/li[text()="O21_GenStep_BiomeOverrides"]</xpath>
            </Operation>


            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/MainButtonDef[contains(tabWindowClass,"O21Toolbox")]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/HediffDef[contains(hediffClass,"O21Toolbox")]</xpath>
            </Operation>


            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/HediffGiverSetDef/hediffGivers/li[contains(@Class,"O21Toolbox")]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/O21Toolbox.UpdateListings.UpdateDef</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/O21Toolbox.AutomatedProducer.RecipeDef_Automated</xpath>
            </Operation>


            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/O21Toolbox.LootCache.LootCacheDef</xpath>
            </Operation>


            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/O21Toolbox.SlotLoadable.SlotLoadableDef</xpath>
            </Operation>


            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/O21Toolbox.Background.BackgroundDef</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThinkTreeDef[defName="DroneMain"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThinkTreeDef[@ParentName="MechMain"]</xpath>
            </Operation>


            <Operation Class="PatchOperationReplace">
                <success>Always</success>
                <xpath>/Defs/ThingDef[@Name="O21_DroneBase"]/race/thinkTreeMain</xpath>
                <value>
                    <thinkTreeMain>Humanlike</thinkTreeMain>
                </value>
            </Operation>

            <Operation Class="PatchOperationReplace">
                <success>Always</success>
                <xpath>/Defs/ThingDef[@Name="O21_DroneBase"]//race/thinkTreeConstant</xpath>
                <value>
                    <thinkTreeConstant>HumanlikeConstant</thinkTreeConstant>
                </value>
            </Operation>

            <Operation Class="PatchOperationAttributeAdd">
                <success>Always</success>
                <xpath>/Defs/ThingDef[@Name="O21_DroneBase"]</xpath>
                <attribute>ParentName</attribute>
                <value>BasePawn</value>
            </Operation>

            <!-- forgotten realm -->
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/RecipeDef[defName="O21_FR_ImplantIllithidTadpole"]</xpath>
            </Operation>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[defName="Human"]/recipes/li[text()="O21_FR_ImplantIllithidTadpole"]</xpath>
            </Operation>

            <!-- sub somethings -->
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/JobDef[defName="SubAI_EnterReconstructor" or defName="SubAI_CarryToReconstructor" or defName="O21_GatherProgramItem"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[defName="SubAI_SubpersonaReconstructor"]/thingClass</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef/inspectorTabs/li[text()="O21Toolbox.AutomatedProducer.ITab_AutomatedProducer"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef/modExtensions/li[@Class="SubpersonaAI.DefModExt_ProgramCartridge"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/TraitDef[@Name="SubAI_ShellTraitBase"]/modExtensions/li[@Class="SubpersonaAI.DefModExt_ShellTrait"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/AlienRace.ThingDef_AlienRace[defName="SubAI_SubpersonaShell"]/recipes/li[text()="SubAI_ShutDown"]</xpath>
            </Operation>

            <!-- mechanoid people -->
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/AlienRace.ThingDef_AlienRace[@Name="O21_BaseMechadroid"]/recipes/li[text()="O21_MechanoidRepairKit"]</xpath>
            </Operation>

            <!-- outladner -->
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[defName="Outland_Ammo_BallistaBolt" or defName="Outland_Ammo_RoundShot"]/modExtensions/li[@Class="Outland.DefModExt_UnconventionalShell"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[defName="Outland_KalociteFormation"]/thingClass</xpath>
            </Operation>

            <!-- there is the bones mod bro -->
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/StatDef[defName="Outland_BoneAmount"]</xpath>
            </Operation>

            <Operation Class="PatchOperationReplace">
                <success>Always</success>
                <xpath>/Defs/ThingDef[defName="Outland_Gun_BallistaTurret"]/verbs/li/soundCast</xpath>
                <value>
                    <soundCast>Bow_Large</soundCast>
                </value>
            </Operation>


            <!-- outer galaxies -->
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/CultureDef/modExtensions/li[@Class="O21Toolbox.Culture.DefModExt_CultureExtended"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/MentalStateDef[defName="O21_OR_MSRebellious"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/MentalBreakDef[defName="O21_OR_MSRebellious"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/MentalStateDef[defName="O21_OR_MSLooseScrews"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/MentalBreakDef[defName="O21_OR_MSLooseScrews"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/HediffDef[defName="O21_OR_CloneConditioning"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/HediffDef[defName="O21_OR_CloneConditioning"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/AlienRace.ThingDef_AlienRace[@Name="O21_OR_BaseHumanoidDroid"]/modExtensions/li[@Class="OuterRim.DefModExt_Droid"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/TraitDef[@Name="O21_OR_DroidTraitBase"]/modExtensions/li[@Class="OuterRim.DefModExt_DroidTrait"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/RecipeDef[defName="O21_OR_AttachRestraintBolt" or defName="O21_OR_RemoveRestraintBolt" or defName="O21_OR_WipeDroidMind"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[defName="O21_OR_MineralMinerLight" or defName="O21_OR_MineralMinerMedium" or defName="O21_OR_MineralMinerHeavy"]/inspectorTabs/li[text()="O21Toolbox.Automation.ITab_Mining"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[defName="O21_OR_MineralMinerLight" or defName="O21_OR_MineralMinerMedium" or defName="O21_OR_MineralMinerHeavy" or defName="O21_OR_TibannaExtractorLight" or defName="O21_OR_TibannaExtractorHeavy"]/placeWorkers/li[text()="O21Toolbox.CustomPlaceWorker.PlaceWorker_PlaceNearThing"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/JobDef[defName="O21_OR_ReprogramDroid" or defName="O21_OR_ReactivateDroid"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/AlienRace.ThingDef_AlienRace[@Name="O21_OR_BaseHumanoidDroid"]/recipes/li[text()="O21_OR_ShutDownDroid" or text()="O21_OR_AttachRestraintBolt" or text()="O21_OR_RemoveRestraintBolt" or text()="O21_OR_WipeDroidMind"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef/comps/li[contains(@Class,"OuterRim") or contains(compClass,"OuterRim")]</xpath>
            </Operation>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef/modExtensions/li[contains(@Class,"OuterRim")]</xpath>
            </Operation>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[defName="O21_OR_CloneHelmetII_Snow"][2]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ResearchProjectDef[defName="O21_Droids_MSEMouseDroid"]/tags</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/TraitDef[defName="O21_OR_Rebellious" or defName="O21_OR_LooseScrews"]</xpath>
            </Operation>
            <Operation Class="PatchOperationAdd">
                <success>Always</success>
                <xpath>/Defs/PawnKindDef[@Name="O21_OR_ClonePhaseIPawnBase" or @Name="O21HaloInsurgentBase"]</xpath>
                <value>
                    <initialWillRange>0~1</initialWillRange>
                    <initialResistanceRange>10~17</initialResistanceRange>
                </value>
            </Operation>

            <Operation Class="PatchOperationAttributeAdd">
                <xpath>/Defs/FactionDef[defName="O21_OR_RepublicClones_PhaseI" or defName="O21_Halo_Faction_Innies"]</xpath>
                <attribute>ParentName</attribute>
                <value>FactionBase</value>
            </Operation>

            <Operation Class="PatchOperationReplace">
                <success>Always</success>
                <xpath>/Defs/PawnKindDef[defName="O21_OR_DroneMSE6Droid"]/lifeStages/li/bodyGraphicData/texPath</xpath>
                <value>
                    <texPath>OuterRim/Droid/MSE</texPath>
                </value>
            </Operation>

            <!-- hello! -->
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/PawnKindDef[@ParentName="UNSCMarineAbstractBase"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/HediffDef[defName="O21_Halo_Covenant_NeedlerShard"]/comps/li[@Class="Halo.HediffCompProperties_DelayedBlam"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[@Name="O21LaserBeamBase" or @Name="PhaserBeamProjectile"]/explosionEffect</xpath>
            </Operation>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[@Name="O21LaserBeamBase" or @Name="PhaserBeamProjectile"]/hitLivingEffect</xpath>
            </Operation>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[@Name="O21LaserBeamBase" or @Name="PhaserBeamProjectile"]/seam</xpath>
            </Operation>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[@Name="O21LaserBeamBase" or @Name="PhaserBeamProjectile"]/lifetime</xpath>
            </Operation>
            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[@Name="O21LaserBeamBase" or @Name="PhaserBeamProjectile"]/textures</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[@Class="O21Toolbox.Laser.LaserBeamDef"]/textures</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[@Class="O21Toolbox.Laser.LaserGunDef"]/barrelLength</xpath>
            </Operation>

            <Operation Class="PatchOperationAttributeRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[@Class="O21Toolbox.Laser.LaserBeamDef" or @Class="O21Toolbox.Laser.LaserGunDef"]</xpath>
                <attribute>Class</attribute>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[@Name="O21LaserBeamBase" or @Name="PhaserBeamProjectile"]/beamGraphic</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/FactionDef[defName="O21_Halo_Faction_UNSC"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/FactionDef[defName="O21_Halo_Faction_Innies" or defName="O21_Halo_Faction_UNSC"]/startingGoodwill</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/FactionDef[defName="O21_Halo_Faction_Innies" or defName="O21_Halo_Faction_UNSC"]/hairTags</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/FactionDef[defName="O21_Halo_Faction_Innies" or defName="O21_Halo_Faction_UNSC"]/naturalColonyGoodwill</xpath>
            </Operation>

            <Operation Class="PatchOperationAttributeAdd">
                <xpath>/Defs/ThingDef[defName="O21_Halo_LaserGraphic" or defName="O21_Trek_PhaserBeamGraphic"]</xpath>
                <attribute>ParentName</attribute>
                <value>BaseBullet</value>
            </Operation>

            <Operation Class="PatchOperationReplace">
                <success>Always</success>
                <xpath>/Defs/ThingDef[defName="O21_Halo_LaserGraphic"]</xpath>
                <value>
                    <graphicData>
                        <texPath>HaloRE/BeamRifleShotNew</texPath>
                        <graphicClass>Graphic_Single</graphicClass>
                    </graphicData>
                </value>
            </Operation>

            <!-- star track -->

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[@Name="PhaserGunBase"]/beamColor</xpath>
            </Operation>

            <Operation Class="PatchOperationReplace">
                <success>Always</success>
                <xpath>/Defs/ThingDef[defName="O21_Trek_PhaserBeamGraphic"]</xpath>
                <value>
                    <graphicData>
                        <texPath>Things/Projectiles/PhaserBeam</texPath>
                        <graphicClass>Graphic_Single</graphicClass>
                    </graphicData>
                </value>
            </Operation>

            <!-- star gates -->

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/HediffDef[defName="SG_SymbioteHost" or defName="SG_SymbioteJaffa"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/HediffGiverSetDef[defName="SG_JaffaStandard"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/RecipeDef[defName="SG_ImplantJaffa" or defName="SG_RemoveJaffa" or defName="SG_ImplantSymbiote" or defName="SG_RemoveSymbiote"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/AlienRace.ThingDef_AlienRace[defName="SG_Jaffa"]/race/hediffGiverSets/li[text()="SG_JaffaStandard"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/AlienRace.ThingDef_AlienRace[defName="SG_Jaffa"]/recipes/li[text()="SG_ImplantJaffa" or text()="SG_RemoveJaffa"]</xpath>
            </Operation>

            <Operation Class="PatchOperationRemove">
                <success>Always</success>
                <xpath>/Defs/ThingDef[defName="SG_Item_SymbioteJar"]/thingClass</xpath>
            </Operation>

            <!-- more stuff -->

            <Operation Class="PatchOperationReplace">
                <success>Always</success>
                <xpath>/Defs/FactionDef[defName="O21_Halo_Faction_Innies"]/backstoryFilters</xpath>
                <value>
                    <backstoryFilters>
                        <li>
                            <categories>
                                <li>Outlander</li>
                            </categories>
                            <commonality>0.95</commonality>
                        </li>
                        <li>
                            <categories>
                                <li>Offworld</li>
                            </categories>
                            <commonality>0.05</commonality>
                        </li>
                    </backstoryFilters>
                </value>
            </Operation>


        </caseTrue>
        <caseFalse></caseFalse>
    </Operation>






    <!--
    <Operation Class="XmlExtensions.OptionalPatch">
        <modId>tests.patches</modId>
        <key>testspatches_123456</key>
        <defaultValue>false</defaultValue>
        <caseTrue>

        </caseTrue>
        <caseFalse>

        </caseFalse>
    </Operation>

    -->

</Patch>